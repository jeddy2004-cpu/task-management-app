<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TaskFlow Pro</title>
  <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* Custom styles */
    .line-clamp-1 {
      display: -webkit-box;
      -webkit-line-clamp: 1;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }
    .line-clamp-2 {
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }
    .transform {
      transition: transform 0.2s;
    }
    .progress-ring {
      width: 40px;
      height: 40px;
    }
    .priority-high { background: linear-gradient(135deg, #f87171, #ef4444); }
    .priority-medium { background: linear-gradient(135deg, #fbbf24, #f59e0b); }
    .priority-low { background: linear-gradient(135deg, #34d399, #10b981); }
    .status-todo { background: linear-gradient(135deg, #6b7280, #4b5563); }
    .status-in-progress { background: linear-gradient(135deg, #3b82f6, #2563eb); }
    .status-done { background: linear-gradient(135deg, #10b981, #059669); }
    .pulse {
      animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
    }
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }
    .floating {
      animation: floating 3s ease-in-out infinite;
    }
    @keyframes floating {
      0% { transform: translateY(0px); }
      50% { transform: translateY(-10px); }
      100% { transform: translateY(0px); }
    }
  </style>
</head>
<body class="bg-gray-50 text-gray-900">
  <div id="root"></div>
  
  <script type="text/babel">
    // Simulated backend with localStorage persistence
    const TaskService = {
      // Initialize with default data or load from localStorage
      getInitialData: () => {
        try {
          const savedData = localStorage.getItem('taskflow-data');
          if (savedData) {
            const data = JSON.parse(savedData);
            // Validate data structure
            if (data && data.tasks && Array.isArray(data.tasks) && data.projects && Array.isArray(data.projects)) {
              return data;
            }
          }
        } catch (e) {
          console.error('Error parsing saved data', e);
        }
        
        // Default data
        return {
          tasks: [
            {
              id: 1,
              title: "Complete project proposal",
              description: "Draft and finalize the Q3 project proposal for client review",
              status: "in-progress",
              priority: "high",
              dueDate: "2023-12-15",
              createdAt: "2023-12-01",
              tags: ["work", "important"],
              assignee: "John Doe",
              completed: false,
              progress: 65,
              estimatedTime: 8,
              actualTime: 5,
              reminders: [],
              comments: [
                { id: 1, user: "Alice", text: "Great start on this!", timestamp: "2023-12-02T10:30" },
                { id: 2, user: "Bob", text: "Need to add budget details", timestamp: "2023-12-03T14:15" }
              ],
              isFavorite: true,
              dependencies: [],
              timeLogged: [
                { date: "2023-12-02", hours: 2 },
                { date: "2023-12-03", hours: 3 }
              ],
              checklist: [
                { id: 1, text: "Research client needs", completed: true },
                { id: 2, text: "Draft initial proposal", completed: false },
                { id: 3, text: "Get team feedback", completed: false },
                { id: 4, text: "Finalize and submit", completed: false }
              ]
            },
            {
              id: 2,
              title: "Design homepage mockup",
              description: "Create wireframes and high-fidelity designs for the new homepage",
              status: "todo",
              priority: "medium",
              dueDate: "2023-12-20",
              createdAt: "2023-12-02",
              tags: ["design", "ui"],
              assignee: "Sarah Wilson",
              completed: false,
              progress: 0,
              estimatedTime: 12,
              actualTime: 0,
              reminders: [],
              comments: [],
              isFavorite: false,
              dependencies: [1],
              timeLogged: [],
              checklist: [
                { id: 1, text: "Create wireframes", completed: false },
                { id: 2, text: "Design high-fidelity mockups", completed: false },
                { id: 3, text: "Get feedback from team", completed: false }
              ]
            },
            {
              id: 3,
              title: "Review code pull requests",
              description: "Review and merge pending pull requests from team members",
              status: "done",
              priority: "low",
              dueDate: "2023-12-05",
              createdAt: "2023-12-03",
              tags: ["development", "code"],
              assignee: "Mike Johnson",
              completed: true,
              progress: 100,
              estimatedTime: 4,
              actualTime: 3.5,
              reminders: [],
              comments: [
                { id: 3, user: "Team", text: "All PRs merged successfully", timestamp: "2023-12-05T16:45" }
              ],
              isFavorite: false,
              dependencies: [],
              timeLogged: [
                { date: "2023-12-04", hours: 2 },
                { date: "2023-12-05", hours: 1.5 }
              ],
              checklist: [
                { id: 1, text: "Review PR #123", completed: true },
                { id: 2, text: "Review PR #124", completed: true },
                { id: 3, text: "Merge approved PRs", completed: true }
              ]
            }
          ],
          projects: [
            { id: 1, name: "Q3 Product Launch", tasks: [1, 2], color: "bg-blue-500" },
            { id: 2, name: "Website Redesign", tasks: [2, 3], color: "bg-purple-500" },
            { id: 3, name: "Internal Tools", tasks: [3], color: "bg-green-500" }
          ],
          settings: {
            darkMode: false,
            viewMode: 'board',
            sidebarOpen: true
          }
        };
      },

      // Save data to localStorage
      saveData: (data) => {
        try {
          localStorage.setItem('taskflow-data', JSON.stringify(data));
          return true;
        } catch (e) {
          console.error('Error saving data', e);
          return false;
        }
      },

      // Get all tasks
      getTasks: () => {
        const data = TaskService.getInitialData();
        return data.tasks || [];
      },

      // Get task by ID
      getTask: (id) => {
        const data = TaskService.getInitialData();
        return data.tasks.find(task => task.id === id);
      },

      // Add new task
      addTask: (task) => {
        const data = TaskService.getInitialData();
        const newTask = {
          ...task,
          id: Date.now(),
          createdAt: new Date().toISOString().split('T')[0]
        };
        data.tasks.push(newTask);
        TaskService.saveData(data);
        return newTask;
      },

      // Update task
      updateTask: (taskId, updates) => {
        const data = TaskService.getInitialData();
        const taskIndex = data.tasks.findIndex(task => task.id === taskId);
        if (taskIndex !== -1) {
          data.tasks[taskIndex] = { ...data.tasks[taskIndex], ...updates };
          TaskService.saveData(data);
          return data.tasks[taskIndex];
        }
        return null;
      },

      // Delete task
      deleteTask: (taskId) => {
        const data = TaskService.getInitialData();
        data.tasks = data.tasks.filter(task => task.id !== taskId);
        TaskService.saveData(data);
        return true;
      },

      // Get projects
      getProjects: () => {
        const data = TaskService.getInitialData();
        return data.projects || [];
      },

      // Update settings
      updateSettings: (settings) => {
        const data = TaskService.getInitialData();
        data.settings = { ...data.settings, ...settings };
        TaskService.saveData(data);
      },

      // Get settings
      getSettings: () => {
        const data = TaskService.getInitialData();
        return data.settings || { darkMode: false, viewMode: 'board', sidebarOpen: true };
      }
    };

    const App = () => {
      // Initialize state from simulated backend
      const initialData = TaskService.getInitialData();
      
      const [tasks, setTasks] = React.useState(initialData.tasks || []);
      const [projects] = React.useState(initialData.projects || []);
      const [viewMode, setViewMode] = React.useState(initialData.settings?.viewMode || 'board');
      const [selectedProject, setSelectedProject] = React.useState(null);
      const [searchTerm, setSearchTerm] = React.useState('');
      const [filterPriority, setFilterPriority] = React.useState('all');
      const [filterStatus, setFilterStatus] = React.useState('all');
      const [showAddTask, setShowAddTask] = React.useState(false);
      const [showTaskDetail, setShowTaskDetail] = React.useState(null);
      const [darkMode, setDarkMode] = React.useState(initialData.settings?.darkMode || false);
      const [sidebarOpen, setSidebarOpen] = React.useState(initialData.settings?.sidebarOpen || true);
      const [activeTab, setActiveTab] = React.useState('tasks');
      const [newTask, setNewTask] = React.useState({
        title: '',
        description: '',
        status: 'todo',
        priority: 'medium',
        dueDate: '',
        tags: [],
        assignee: '',
        estimatedTime: 0,
        reminders: [],
        checklist: []
      });
      const [tagInput, setTagInput] = React.useState('');
      const [checklistInput, setChecklistInput] = React.useState('');

      // Enhanced task operations with persistence
      const addTask = () => {
        if (!newTask.title.trim()) return;
        
        const task = TaskService.addTask({
          ...newTask,
          completed: false,
          progress: 0,
          actualTime: 0,
          comments: [],
          isFavorite: false,
          dependencies: [],
          timeLogged: [],
          checklist: newTask.checklist.length > 0 ? newTask.checklist : []
        });
        
        setTasks(prevTasks => [...prevTasks, task]);
        setNewTask({
          title: '',
          description: '',
          status: 'todo',
          priority: 'medium',
          dueDate: '',
          tags: [],
          assignee: '',
          estimatedTime: 0,
          reminders: [],
          checklist: []
        });
        setTagInput('');
        setChecklistInput('');
        setShowAddTask(false);
      };

      const updateTask = (taskId, updates) => {
        const updatedTask = TaskService.updateTask(taskId, updates);
        if (updatedTask) {
          setTasks(prevTasks => prevTasks.map(task => 
            task.id === taskId ? updatedTask : task
          ));
        }
      };

      const toggleComplete = (taskId) => {
        const task = tasks.find(t => t.id === taskId);
        if (task) {
          updateTask(taskId, { completed: !task.completed });
        }
      };

      const setFavorite = (taskId, isFavorite) => {
        updateTask(taskId, { isFavorite });
      };

      const deleteTask = (taskId) => {
        TaskService.deleteTask(taskId);
        setTasks(prevTasks => prevTasks.filter(task => task.id !== taskId));
        setShowTaskDetail(null);
      };

      const addTag = () => {
        if (tagInput.trim() && !newTask.tags.includes(tagInput.trim())) {
          setNewTask(prev => ({
            ...prev,
            tags: [...prev.tags, tagInput.trim()]
          }));
          setTagInput('');
        }
      };

      const removeTag = (tagToRemove) => {
        setNewTask(prev => ({
          ...prev,
          tags: prev.tags.filter(tag => tag !== tagToRemove)
        }));
      };

      const addChecklistItem = () => {
        if (checklistInput.trim()) {
          setNewTask(prev => ({
            ...prev,
            checklist: [
              ...prev.checklist,
              { id: Date.now(), text: checklistInput, completed: false }
            ]
          }));
          setChecklistInput('');
        }
      };

      const removeChecklistItem = (id) => {
        setNewTask(prev => ({
          ...prev,
          checklist: prev.checklist.filter(item => item.id !== id)
        }));
      };

      const toggleChecklistItem = (id) => {
        setNewTask(prev => ({
          ...prev,
          checklist: prev.checklist.map(item => 
            item.id === id ? { ...item, completed: !item.completed } : item
          )
        }));
      };

      // Update settings with persistence
      React.useEffect(() => {
        TaskService.updateSettings({ darkMode, viewMode, sidebarOpen });
      }, [darkMode, viewMode, sidebarOpen]);

      // Filtering logic
      const filteredTasks = React.useMemo(() => {
        return tasks.filter(task => {
          const matchesSearch = task.title.toLowerCase().includes(searchTerm.toLowerCase()) ||
                               task.description?.toLowerCase().includes(searchTerm.toLowerCase()) ||
                               task.tags.some(tag => tag.toLowerCase().includes(searchTerm.toLowerCase())) ||
                               task.assignee?.toLowerCase().includes(searchTerm.toLowerCase());
          const matchesPriority = filterPriority === 'all' || task.priority === filterPriority;
          const matchesStatus = filterStatus === 'all' || task.status === filterStatus;
          const matchesProject = !selectedProject || selectedProject.tasks.includes(task.id);
          
          return matchesSearch && matchesPriority && matchesStatus && matchesProject;
        });
      }, [tasks, searchTerm, filterPriority, filterStatus, selectedProject]);

      // Helper functions
      const getPriorityColor = (priority) => {
        switch (priority) {
          case 'high': return 'bg-red-100 text-red-800 border-red-200';
          case 'medium': return 'bg-yellow-100 text-yellow-800 border-yellow-200';
          case 'low': return 'bg-green-100 text-green-800 border-green-200';
          default: return 'bg-gray-100 text-gray-800 border-gray-200';
        }
      };

      const getStatusColor = (status) => {
        switch (status) {
          case 'todo': return 'bg-gray-100 text-gray-800';
          case 'in-progress': return 'bg-blue-100 text-blue-800';
          case 'done': return 'bg-green-100 text-green-800';
          default: return 'bg-gray-100 text-gray-800';
        }
      };

      const formatDate = (dateString) => {
        try {
          if (!dateString) return '';
          return new Date(dateString).toLocaleDateString('en-US', {
            month: 'short',
            day: 'numeric',
            year: 'numeric'
          });
        } catch (e) {
          return dateString;
        }
      };

      const getDaysUntilDue = (dueDate) => {
        try {
          if (!dueDate) return 0;
          const today = new Date();
          const due = new Date(dueDate);
          const diffTime = due - today;
          const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
          return diffDays;
        } catch (e) {
          return 0;
        }
      };

      const ProgressRing = ({ progress, size = 40 }) => {
        const radius = (size - 4) / 2;
        const circumference = radius * 2 * Math.PI;
        const strokeDasharray = `${circumference} ${circumference}`;
        const strokeDashoffset = circumference - (progress / 100) * circumference;
        
        return (
          <div className="relative" style={{ width: size, height: size }}>
            <svg className="transform -rotate-90 w-full h-full" viewBox={`0 0 ${size} ${size}`}>
              <circle
                cx={size / 2}
                cy={size / 2}
                r={radius}
                stroke="currentColor"
                strokeWidth="4"
                fill="transparent"
                className="text-gray-200"
              />
              <circle
                cx={size / 2}
                cy={size / 2}
                r={radius}
                stroke="currentColor"
                strokeWidth="4"
                fill="transparent"
                strokeDasharray={strokeDasharray}
                strokeDashoffset={strokeDashoffset}
                className="text-blue-500 transition-all duration-300 ease-in-out"
                strokeLinecap="round"
              />
            </svg>
            <div className="absolute inset-0 flex items-center justify-center">
              <span className="text-xs font-bold">{progress}%</span>
            </div>
          </div>
        );
      };

      const TaskCard = ({ task }) => {
        const daysUntilDue = getDaysUntilDue(task.dueDate);
        const isOverdue = daysUntilDue < 0 && !task.completed;
        const showDueWarning = daysUntilDue <= 3 && daysUntilDue >= 0 && !task.completed;
        const hasIncompleteDependencies = task.dependencies.some(depId => {
          const depTask = tasks.find(t => t.id === depId);
          return depTask && !depTask.completed;
        });

        return (
          <div 
            className={`bg-white rounded-lg border p-4 shadow-sm hover:shadow-md cursor-pointer transform hover:-translate-y-1 ${
              task.completed ? 'opacity-75' : ''
            } ${hasIncompleteDependencies ? 'border-2 border-orange-300' : ''}`}
            onClick={() => setShowTaskDetail(task.id)}
          >
            {hasIncompleteDependencies && (
              <div className="absolute -top-2 -right-2 bg-orange-500 text-white text-xs rounded-full w-6 h-6 flex items-center justify-center">
                !
              </div>
            )}
            
            <div className="flex items-start justify-between mb-2">
              <div className="flex items-center space-x-2 flex-1">
                <button
                  onClick={(e) => {
                    e.stopPropagation();
                    toggleComplete(task.id);
                  }}
                  className={`w-5 h-5 rounded border flex items-center justify-center ${
                    task.completed 
                      ? 'bg-green-500 border-green-500 text-white' 
                      : 'border-gray-300 hover:border-green-400'
                  }`}
                >
                  {task.completed && <svg xmlns="http://www.w3.org/2000/svg" className="h-3 w-3" viewBox="0 0 20 20" fill="currentColor"><path fillRule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clipRule="evenodd" /></svg>}
                </button>
                <h3 className={`font-medium text-gray-900 ${task.completed ? 'line-through' : ''}`}>
                  {task.title}
                </h3>
              </div>
              <button
                onClick={(e) => {
                  e.stopPropagation();
                  setFavorite(task.id, !task.isFavorite);
                }}
                className={`p-1 rounded ${
                  task.isFavorite ? 'text-yellow-500' : 'text-gray-400 hover:text-yellow-500'
                }`}
              >
                <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5" fill={task.isFavorite ? 'currentColor' : 'none'} viewBox="0 0 24 24" stroke="currentColor">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z" />
                </svg>
              </button>
            </div>

            {task.description && (
              <p className="text-sm text-gray-600 mb-3 line-clamp-2">{task.description}</p>
            )}

            <div className="flex flex-wrap items-center gap-2 mb-3">
              <span className={`text-xs px-2 py-1 rounded-full border ${getPriorityColor(task.priority)} ${`priority-${task.priority}`}`}>
                {task.priority}
              </span>
              <span className={`text-xs px-2 py-1 rounded-full ${getStatusColor(task.status)} ${`status-${task.status}`}`}>
                {task.status.replace('-', ' ')}
              </span>
              {task.dueDate && (
                <div className={`flex items-center text-xs ${
                  isOverdue ? 'text-red-600' : 
                  showDueWarning ? 'text-orange-600' : 'text-gray-600'
                }`}>
                  <svg xmlns="http://www.w3.org/2000/svg" className="h-3 w-3 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                  </svg>
                  {formatDate(task.dueDate)}
                  {isOverdue && <svg xmlns="http://www.w3.org/2000/svg" className="h-3 w-3 ml-1" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" /></svg>}
                </div>
              )}
            </div>

            {task.tags.length > 0 && (
              <div className="flex flex-wrap gap-1 mb-3">
                {task.tags.map(tag => (
                  <span key={tag} className="text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded">
                    {tag}
                  </span>
                ))}
              </div>
            )}

            {task.assignee && (
              <div className="flex items-center text-sm text-gray-600 mb-3">
                <svg xmlns="http://www.w3.org/2000/svg" className="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                </svg>
                {task.assignee}
              </div>
            )}

            <div className="flex items-center justify-between">
              {task.progress > 0 && (
                <div className="flex items-center">
                  <ProgressRing progress={task.progress} size={30} />
                  <span className="ml-2 text-xs text-gray-600">Progress</span>
                </div>
              )}
              
              <div className="text-xs text-gray-500">
                {task.timeLogged.reduce((total, log) => total + log.hours, 0)}h logged
              </div>
            </div>
          </div>
        );
      };

      const TaskBoard = () => {
        const columns = [
          { id: 'todo', title: 'To Do', color: 'bg-gray-100' },
          { id: 'in-progress', title: 'In Progress', color: 'bg-blue-100' },
          { id: 'done', title: 'Done', color: 'bg-green-100' }
        ];

        return (
          <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
            {columns.map(column => {
              const columnTasks = filteredTasks.filter(task => task.status === column.id);
              
              return (
                <div key={column.id} className={`${column.color} rounded-lg p-4 min-h-96`}>
                  <h2 className="font-semibold text-gray-800 mb-4 flex items-center">
                    {column.title}
                    <span className="ml-2 bg-white bg-opacity-70 text-sm px-2 py-1 rounded-full">
                      {columnTasks.length}
                    </span>
                  </h2>
                  <div className="space-y-3">
                    {columnTasks.map(task => (
                      <TaskCard key={task.id} task={task} />
                    ))}
                    {columnTasks.length === 0 && (
                      <div className="text-center text-gray-500 py-8">
                        <svg xmlns="http://www.w3.org/2000/svg" className="h-12 w-12 mx-auto mb-4 text-gray-300" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={1} d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" />
                        </svg>
                        <p className="text-sm">No tasks in this column</p>
                      </div>
                    )}
                  </div>
                </div>
              );
            })}
          </div>
        );
      };

      const TaskList = () => {
        return (
          <div className="bg-white rounded-lg border shadow-sm">
            <div className="divide-y divide-gray-200">
              {filteredTasks.map(task => (
                <div 
                  key={task.id}
                  className="p-4 hover:bg-gray-50 cursor-pointer"
                  onClick={() => setShowTaskDetail(task.id)}
                >
                  <div className="flex items-center justify-between">
                    <div className="flex items-center space-x-4 flex-1">
                      <button
                        onClick={(e) => {
                          e.stopPropagation();
                          toggleComplete(task.id);
                        }}
                        className={`w-5 h-5 rounded border flex items-center justify-center ${
                          task.completed 
                            ? 'bg-green-500 border-green-500 text-white' 
                            : 'border-gray-300 hover:border-green-400'
                        }`}
                      >
                        {task.completed && <svg xmlns="http://www.w3.org/2000/svg" className="h-3 w-3" viewBox="0 0 20 20" fill="currentColor"><path fillRule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clipRule="evenodd" /></svg>}
                      </button>
                      
                      <div className="flex-1">
                        <h3 className={`font-medium ${task.completed ? 'line-through text-gray-500' : 'text-gray-900'}`}>
                          {task.title}
                        </h3>
                        {task.description && (
                          <p className="text-sm text-gray-600 mt-1 line-clamp-1">{task.description}</p>
                        )}
                      </div>
                    </div>

                    <div className="flex items-center space-x-3">
                      <span className={`text-xs px-2 py-1 rounded-full border ${getPriorityColor(task.priority)}`}>
                        {task.priority}
                      </span>
                      
                      <div className="flex items-center text-sm text-gray-600">
                        {task.dueDate && (
                          <>
                            <svg xmlns="http://www.w3.org/2000/svg" className="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                            </svg>
                            {formatDate(task.dueDate)}
                          </>
                        )}
                      </div>

                      <button
                        onClick={(e) => {
                          e.stopPropagation();
                          setFavorite(task.id, !task.isFavorite);
                        }}
                        className={`p-1 rounded ${
                          task.isFavorite ? 'text-yellow-500' : 'text-gray-400 hover:text-yellow-500'
                        }`}
                      >
                        <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5" fill={task.isFavorite ? 'currentColor' : 'none'} viewBox="0 0 24 24" stroke="currentColor">
                          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z" />
                        </svg>
                      </button>
                    </div>
                  </div>

                  <div className="flex items-center justify-between mt-3 ml-9">
                    <div className="flex flex-wrap gap-1">
                      {task.tags.map(tag => (
                        <span key={tag} className="text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded">
                          {tag}
                        </span>
                      ))}
                    </div>
                    
                    {task.progress > 0 && (
                      <div className="flex items-center">
                        <ProgressRing progress={task.progress} size={24} />
                        <span className="ml-2 text-xs text-gray-500">
                          {task.timeLogged.reduce((total, log) => total + log.hours, 0)}h
                        </span>
                      </div>
                    )}
                  </div>
                </div>
              ))}
              
              {filteredTasks.length === 0 && (
                <div className="text-center py-12 text-gray-500">
                  <svg xmlns="http://www.w3.org/2000/svg" className="h-16 w-16 mx-auto mb-4 text-gray-300" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={1} d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" />
                  </svg>
                  <p className="text-lg">No tasks found</p>
                  <p className="text-sm mt-1">Try adjusting your search or filters</p>
                </div>
              )}
            </div>
          </div>
        );
      };

      const AnalyticsDashboard = () => {
        const totalTasks = tasks.length;
        const completedTasks = tasks.filter(t => t.completed).length;
        const completionRate = totalTasks > 0 ? Math.round((completedTasks / totalTasks) * 100) : 0;
        
        const priorityDistribution = tasks.reduce((acc, task) => {
          acc[task.priority] = (acc[task.priority] || 0) + 1;
          return acc;
        }, { high: 0, medium: 0, low: 0 });
        
        const statusDistribution = tasks.reduce((acc, task) => {
          acc[task.status] = (acc[task.status] || 0) + 1;
          return acc;
        }, { todo: 0, 'in-progress': 0, done: 0 });

        return (
          <div className="space-y-6">
            <div className="grid grid-cols-1 md:grid-cols-4 gap-6">
              <div className="bg-white rounded-lg p-6 shadow-sm">
                <div className="flex items-center">
                  <div className="p-3 rounded-full bg-blue-100 text-blue-600">
                    <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" />
                    </svg>
                  </div>
                  <div className="ml-4">
                    <p className="text-sm font-medium text-gray-600">Total Tasks</p>
                    <p className="text-2xl font-semibold text-gray-900">{totalTasks}</p>
                  </div>
                </div>
              </div>

              <div className="bg-white rounded-lg p-6 shadow-sm">
                <div className="flex items-center">
                  <div className="p-3 rounded-full bg-green-100 text-green-600">
                    <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                  </div>
                  <div className="ml-4">
                    <p className="text-sm font-medium text-gray-600">Completed</p>
                    <p className="text-2xl font-semibold text-gray-900">{completedTasks}</p>
                  </div>
                </div>
              </div>

              <div className="bg-white rounded-lg p-6 shadow-sm">
                <div className="flex items-center">
                  <div className="p-3 rounded-full bg-purple-100 text-purple-600">
                    <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M13 7h8m0 0v8m0-8l-8 8-4-4-8 8" />
                    </svg>
                  </div>
                  <div className="ml-4">
                    <p className="text-sm font-medium text-gray-600">Completion Rate</p>
                    <p className="text-2xl font-semibold text-gray-900">{completionRate}%</p>
                  </div>
                </div>
              </div>

              <div className="bg-white rounded-lg p-6 shadow-sm">
                <div className="flex items-center">
                  <div className="p-3 rounded-full bg-orange-100 text-orange-600">
                    <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                  </div>
                  <div className="ml-4">
                    <p className="text-sm font-medium text-gray-600">Avg. Time</p>
                    <p className="text-2xl font-semibold text-gray-900">
                      {tasks.length > 0 ? (tasks.reduce((sum, t) => sum + t.actualTime, 0) / tasks.length).toFixed(1) : 0}h
                    </p>
                  </div>
                </div>
              </div>
            </div>

            <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div className="bg-white rounded-lg p-6 shadow-sm">
                <h3 className="text-lg font-semibold mb-4">Tasks by Priority</h3>
                <div className="space-y-3">
                  {Object.entries(priorityDistribution).map(([priority, count]) => (
                    <div key={priority} className="flex items-center justify-between">
                      <div className="flex items-center">
                        <div className={`w-3 h-3 rounded-full mr-2 priority-${priority}`}></div>
                        <span className="capitalize">{priority}</span>
                      </div>
                      <div className="flex items-center">
                        <div className="w-32 bg-gray-200 rounded-full h-2 mr-3">
                          <div 
                            className={`h-2 rounded-full ${priority === 'high' ? 'bg-red-500' : priority === 'medium' ? 'bg-yellow-500' : 'bg-green-500'}`}
                            style={{ width: `${totalTasks > 0 ? (count / totalTasks) * 100 : 0}%` }}
                          ></div>
                        </div>
                        <span className="text-sm text-gray-600">{count}</span>
                      </div>
                    </div>
                  ))}
                </div>
              </div>

              <div className="bg-white rounded-lg p-6 shadow-sm">
                <h3 className="text-lg font-semibold mb-4">Tasks by Status</h3>
                <div className="space-y-3">
                  {Object.entries(statusDistribution).map(([status, count]) => (
                    <div key={status} className="flex items-center justify-between">
                      <div className="flex items-center">
                        <div className={`w-3 h-3 rounded-full mr-2 status-${status}`}></div>
                        <span className="capitalize">{status.replace('-', ' ')}</span>
                      </div>
                      <div className="flex items-center">
                        <div className="w-32 bg-gray-200 rounded-full h-2 mr-3">
                          <div 
                            className={`h-2 rounded-full ${status === 'done' ? 'bg-green-500' : status === 'in-progress' ? 'bg-blue-500' : 'bg-gray-500'}`}
                            style={{ width: `${totalTasks > 0 ? (count / totalTasks) * 100 : 0}%` }}
                          ></div>
                        </div>
                        <span className="text-sm text-gray-600">{count}</span>
                      </div>
                    </div>
                  ))}
                </div>
              </div>
            </div>

            <div className="bg-white rounded-lg p-6 shadow-sm">
              <h3 className="text-lg font-semibold mb-4">Productivity Score</h3>
              <div className="flex items-center">
                <div className="w-40 h-40 mr-6">
                  <ProgressRing progress={78} size={160} />
                </div>
                <div>
                  <p className="text-3xl font-bold text-gray-900">78/100</p>
                  <p className="text-gray-600 mt-2">Your productivity score is calculated based on task completion rate, time management, and priority handling.</p>
                  <div className="mt-4 flex space-x-2">
                    <span className="inline-flex items-center px-3 py-1 rounded-full text-sm bg-green-100 text-green-800">
                      <svg xmlns="http://www.w3.org/2000/svg" className="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M13 7h8m0 0v8m0-8l-8 8-4-4-8 8" /></svg>
                      Good
                    </span>
                    <span className="inline-flex items-center px-3 py-1 rounded-full text-sm bg-blue-100 text-blue-800">
                      <svg xmlns="http://www.w3.org/2000/svg" className="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" /></svg>
                      78th percentile
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        );
      };

      const AddTaskModal = () => {
        if (!showAddTask) return null;

        return (
          <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
            <div className="bg-white rounded-lg max-w-2xl w-full">
              <div className="p-6">
                <div className="flex items-center justify-between mb-6">
                  <h2 className="text-2xl font-bold text-gray-900">Add New Task</h2>
                  <button
                    onClick={() => setShowAddTask(false)}
                    className="p-2 text-gray-400 hover:text-gray-600"
                  >
                    <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
                    </svg>
                  </button>
                </div>

                <div className="space-y-4">
                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-1">Title</label>
                    <input
                      type="text"
                      value={newTask.title}
                      onChange={(e) => setNewTask({ ...newTask, title: e.target.value })}
                      className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                      placeholder="Enter task title"
                    />
                  </div>
                  
                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-1">Description</label>
                    <textarea
                      value={newTask.description}
                      onChange={(e) => setNewTask({ ...newTask, description: e.target.value })}
                      rows={3}
                      className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                      placeholder="Enter task description"
                    />
                  </div>

                  <div className="grid grid-cols-2 md:grid-cols-3 gap-4">
                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-1">Status</label>
                      <select
                        value={newTask.status}
                        onChange={(e) => setNewTask({ ...newTask, status: e.target.value })}
                        className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                      >
                        <option value="todo">To Do</option>
                        <option value="in-progress">In Progress</option>
                        <option value="done">Done</option>
                      </select>
                    </div>

                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-1">Priority</label>
                      <select
                        value={newTask.priority}
                        onChange={(e) => setNewTask({ ...newTask, priority: e.target.value })}
                        className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                      >
                        <option value="low">Low</option>
                        <option value="medium">Medium</option>
                        <option value="high">High</option>
                      </select>
                    </div>

                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-1">Due Date</label>
                      <input
                        type="date"
                        value={newTask.dueDate}
                        onChange={(e) => setNewTask({ ...newTask, dueDate: e.target.value })}
                        className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                      />
                    </div>
                  </div>

                  <div className="grid grid-cols-2 gap-4">
                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-1">Assignee</label>
                      <input
                        type="text"
                        value={newTask.assignee}
                        onChange={(e) => setNewTask({ ...newTask, assignee: e.target.value })}
                        className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                        placeholder="Enter assignee name"
                      />
                    </div>

                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-1">Estimated Time (hours)</label>
                      <input
                        type="number"
                        value={newTask.estimatedTime}
                        onChange={(e) => setNewTask({ ...newTask, estimatedTime: parseFloat(e.target.value) || 0 })}
                        className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                        min="0"
                        step="0.5"
                      />
                    </div>
                  </div>

                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-2">Tags</label>
                    <div className="flex flex-wrap gap-2 mb-2">
                      {newTask.tags.map(tag => (
                        <span key={tag} className="inline-flex items-center bg-gray-100 text-gray-800 text-xs px-2 py-1 rounded">
                          {tag}
                          <button
                            type="button"
                            className="ml-1 text-gray-500 hover:text-gray-700"
                            onClick={() => removeTag(tag)}
                          >
                            <svg xmlns="http://www.w3.org/2000/svg" className="h-3 w-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
                            </svg>
                          </button>
                        </span>
                      ))}
                    </div>
                    <div className="flex">
                      <input
                        type="text"
                        value={tagInput}
                        onChange={(e) => setTagInput(e.target.value)}
                        onKeyPress={(e) => e.key === 'Enter' && addTag()}
                        className="flex-1 px-3 py-2 border border-gray-300 rounded-l-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                        placeholder="Add a tag and press Enter"
                      />
                      <button
                        type="button"
                        onClick={addTag}
                        className="px-3 py-2 bg-blue-600 text-white rounded-r-md hover:bg-blue-700"
                      >
                        Add
                      </button>
                    </div>
                  </div>

                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-2">Checklist</label>
                    <div className="space-y-2 mb-2">
                      {newTask.checklist.map(item => (
                        <div key={item.id} className="flex items-center">
                          <input
                            type="checkbox"
                            checked={item.completed}
                            onChange={() => toggleChecklistItem(item.id)}
                            className="w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"
                          />
                          <input
                            type="text"
                            value={item.text}
                            onChange={(e) => {
                              setNewTask({
                                ...newTask,
                                checklist: newTask.checklist.map(i => 
                                  i.id === item.id ? { ...i, text: e.target.value } : i
                                )
                              });
                            }}
                            className="ml-2 flex-1 px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"
                          />
                          <button
                            type="button"
                            onClick={() => removeChecklistItem(item.id)}
                            className="ml-2 text-red-500 hover:text-red-700"
                          >
                            <svg xmlns="http://www.w3.org/2000/svg" className="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                            </svg>
                          </button>
                        </div>
                      ))}
                    </div>
                    <div className="flex">
                      <input
                        type="text"
                        value={checklistInput}
                        onChange={(e) => setChecklistInput(e.target.value)}
                        onKeyPress={(e) => e.key === 'Enter' && addChecklistItem()}
                        className="flex-1 px-3 py-2 border border-gray-300 rounded-l-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                        placeholder="Add a checklist item and press Enter"
                      />
                      <button
                        type="button"
                        onClick={addChecklistItem}
                        className="px-3 py-2 bg-blue-600 text-white rounded-r-md hover:bg-blue-700"
                      >
                        Add
                      </button>
                    </div>
                  </div>

                  <div className="flex justify-end space-x-3 pt-4">
                    <button
                      onClick={() => setShowAddTask(false)}
                      className="px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50 transition-colors"
                    >
                      Cancel
                    </button>
                    <button
                      onClick={addTask}
                      className="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors"
                    >
                      Add Task
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        );
      };

      const TaskDetailModal = ({ task, onClose }) => {
        const [editMode, setEditMode] = React.useState(false);
        const [editedTask, setEditedTask] = React.useState({ ...task });
        const [newComment, setNewComment] = React.useState('');
        const [showChecklist, setShowChecklist] = React.useState(true);

        const handleSave = () => {
          updateTask(task.id, editedTask);
          setEditMode(false);
        };

        const addComment = () => {
          if (!newComment.trim()) return;
          
          const comment = {
            id: Date.now(),
            user: 'Current User',
            text: newComment,
            timestamp: new Date().toISOString()
          };
          
          const updatedComments = [...task.comments, comment];
          updateTask(task.id, { comments: updatedComments });
          setNewComment('');
        };

        const toggleChecklistItem = (id) => {
          const updatedChecklist = editedTask.checklist.map(item => 
            item.id === id ? { ...item, completed: !item.completed } : item
          );
          setEditedTask({ ...editedTask, checklist: updatedChecklist });
        };

        if (!task) return null;

        return (
          <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
            <div className="bg-white rounded-lg max-w-4xl w-full max-h-screen overflow-y-auto">
              <div className="p-6">
                <div className="flex items-center justify-between mb-6">
                  <h2 className="text-2xl font-bold text-gray-900">Task Details</h2>
                  <div className="flex items-center space-x-2">
                    <button
                      onClick={() => setFavorite(task.id, !task.isFavorite)}
                      className={`p-2 rounded ${
                        task.isFavorite ? 'text-yellow-500' : 'text-gray-400 hover:text-yellow-500'
                      }`}
                    >
                      <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill={task.isFavorite ? 'currentColor' : 'none'} viewBox="0 0 24 24" stroke="currentColor">
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z" />
                      </svg>
                    </button>
                    <button
                      onClick={onClose}
                      className="p-2 text-gray-400 hover:text-gray-600"
                    >
                      <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
                      </svg>
                    </button>
                  </div>
                </div>

                {editMode ? (
                  <div className="space-y-4">
                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-1">Title</label>
                      <input
                        type="text"
                        value={editedTask.title}
                        onChange={(e) => setEditedTask({ ...editedTask, title: e.target.value })}
                        className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                      />
                    </div>
                    
                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-1">Description</label>
                      <textarea
                        value={editedTask.description}
                        onChange={(e) => setEditedTask({ ...editedTask, description: e.target.value })}
                        rows={3}
                        className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                      />
                    </div>

                    <div className="grid grid-cols-2 md:grid-cols-3 gap-4">
                      <div>
                        <label className="block text-sm font-medium text-gray-700 mb-1">Status</label>
                        <select
                          value={editedTask.status}
                          onChange={(e) => setEditedTask({ ...editedTask, status: e.target.value })}
                          className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                        >
                          <option value="todo">To Do</option>
                          <option value="in-progress">In Progress</option>
                          <option value="done">Done</option>
                        </select>
                      </div>

                      <div>
                        <label className="block text-sm font-medium text-gray-700 mb-1">Priority</label>
                        <select
                          value={editedTask.priority}
                          onChange={(e) => setEditedTask({ ...editedTask, priority: e.target.value })}
                          className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                        >
                          <option value="low">Low</option>
                          <option value="medium">Medium</option>
                          <option value="high">High</option>
                        </select>
                      </div>

                      <div>
                        <label className="block text-sm font-medium text-gray-700 mb-1">Due Date</label>
                        <input
                          type="date"
                          value={editedTask.dueDate}
                          onChange={(e) => setEditedTask({ ...editedTask, dueDate: e.target.value })}
                          className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                        />
                      </div>
                    </div>

                    <div className="grid grid-cols-2 gap-4">
                      <div>
                        <label className="block text-sm font-medium text-gray-700 mb-1">Assignee</label>
                        <input
                          type="text"
                          value={editedTask.assignee}
                          onChange={(e) => setEditedTask({ ...editedTask, assignee: e.target.value })}
                          className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                        />
                      </div>

                      <div>
                        <label className="block text-sm font-medium text-gray-700 mb-1">Estimated Time (hours)</label>
                        <input
                          type="number"
                          value={editedTask.estimatedTime}
                          onChange={(e) => setEditedTask({ ...editedTask, estimatedTime: parseFloat(e.target.value) || 0 })}
                          className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                          min="0"
                          step="0.5"
                        />
                      </div>
                    </div>

                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-2">Checklist</label>
                      <div className="space-y-2 mb-2">
                        {editedTask.checklist.map(item => (
                          <div key={item.id} className="flex items-center">
                            <input
                              type="checkbox"
                              checked={item.completed}
                              onChange={() => toggleChecklistItem(item.id)}
                              className="w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"
                            />
                            <input
                              type="text"
                              value={item.text}
                              onChange={(e) => {
                                setEditedTask({
                                  ...editedTask,
                                  checklist: editedTask.checklist.map(i => 
                                    i.id === item.id ? { ...i, text: e.target.value } : i
                                  )
                                });
                              }}
                              className="ml-2 flex-1 px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"
                            />
                          </div>
                        ))}
                      </div>
                      <button
                        type="button"
                        onClick={() => {
                          const newItem = { id: Date.now(), text: 'New item', completed: false };
                          setEditedTask({
                            ...editedTask,
                            checklist: [...editedTask.checklist, newItem]
                          });
                        }}
                        className="text-sm text-blue-600 hover:text-blue-800"
                      >
                        + Add checklist item
                      </button>
                    </div>

                    <div className="flex justify-end space-x-3 pt-4">
                      <button
                        onClick={() => setEditMode(false)}
                        className="px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50"
                      >
                        Cancel
                      </button>
                      <button
                        onClick={handleSave}
                        className="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"
                      >
                        Save Changes
                      </button>
                    </div>
                  </div>
                ) : (
                  <div className="space-y-6">
                    <div>
                      <h3 className="text-lg font-semibold text-gray-900 mb-2">{task.title}</h3>
                      {task.description && (
                        <p className="text-gray-600 mb-4">{task.description}</p>
                      )}
                    </div>

                    <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                      <div className="bg-gray-50 p-3 rounded-lg">
                        <label className="block text-xs font-medium text-gray-500 mb-1">Status</label>
                        <span className={`inline-block px-2 py-1 text-xs rounded-full ${getStatusColor(task.status)} ${`status-${task.status}`}`}>
                          {task.status.replace('-', ' ')}
                        </span>
                      </div>

                      <div className="bg-gray-50 p-3 rounded-lg">
                        <label className="block text-xs font-medium text-gray-500 mb-1">Priority</label>
                        <span className={`inline-block px-2 py-1 text-xs rounded-full border ${getPriorityColor(task.priority)} ${`priority-${task.priority}`}`}>
                          {task.priority}
                        </span>
                      </div>

                      <div className="bg-gray-50 p-3 rounded-lg">
                        <label className="block text-xs font-medium text-gray-500 mb-1">Due Date</label>
                        <div className="flex items-center text-sm">
                          <svg xmlns="http://www.w3.org/2000/svg" className="h-4 w-4 mr-1 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                          </svg>
                          {formatDate(task.dueDate)}
                        </div>
                      </div>

                      <div className="bg-gray-50 p-3 rounded-lg">
                        <label className="block text-xs font-medium text-gray-500 mb-1">Assignee</label>
                        <div className="flex items-center text-sm">
                          <svg xmlns="http://www.w3.org/2000/svg" className="h-4 w-4 mr-1 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                          </svg>
                          {task.assignee || 'Unassigned'}
                        </div>
                      </div>
                    </div>

                    {(task.tags.length > 0 || task.dependencies.length > 0) && (
                      <div className="border-t pt-4">
                        <div className="flex flex-wrap gap-2">
                          {task.tags.map(tag => (
                            <span key={tag} className="bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded">
                              {tag}
                            </span>
                          ))}
                          {task.dependencies.map(depId => {
                            const depTask = tasks.find(t => t.id === depId);
                            return depTask ? (
                              <span key={depId} className="bg-orange-100 text-orange-800 text-xs px-2 py-1 rounded">
                                Blocks: {depTask.title}
                              </span>
                            ) : null;
                          })}
                        </div>
                      </div>
                    )}

                    <div className="border-t pt-4">
                      <div className="flex items-center justify-between mb-4">
                        <h4 className="font-medium text-gray-900">Progress</h4>
                        <div className="flex items-center">
                          <ProgressRing progress={task.progress} />
                          <span className="ml-2 text-sm">{task.progress}%</span>
                        </div>
                      </div>
                      <div className="grid grid-cols-2 gap-4">
                        <div className="bg-gray-50 p-3 rounded-lg">
                          <label className="block text-xs font-medium text-gray-500 mb-1">Estimated Time</label>
                          <div className="flex items-center text-sm">
                            <svg xmlns="http://www.w3.org/2000/svg" className="h-4 w-4 mr-1 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                            </svg>
                            {task.estimatedTime} hours
                          </div>
                        </div>
                        <div className="bg-gray-50 p-3 rounded-lg">
                          <label className="block text-xs font-medium text-gray-500 mb-1">Actual Time</label>
                          <div className="flex items-center text-sm">
                            <svg xmlns="http://www.w3.org/2000/svg" className="h-4 w-4 mr-1 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                            </svg>
                            {task.actualTime} hours
                          </div>
                        </div>
                      </div>
                    </div>

                    {task.checklist.length > 0 && (
                      <div className="border-t pt-4">
                        <div className="flex items-center justify-between mb-3">
                          <h4 className="font-medium text-gray-900">Checklist</h4>
                          <button
                            onClick={() => setShowChecklist(!showChecklist)}
                            className="text-sm text-blue-600 hover:text-blue-800"
                          >
                            {showChecklist ? 'Hide' : 'Show'}
                          </button>
                        </div>
                        
                        {showChecklist && (
                          <div className="space-y-2">
                            {task.checklist.map(item => (
                              <div key={item.id} className="flex items-center">
                                <input
                                  type="checkbox"
                                  checked={item.completed}
                                  onChange={() => {
                                    const updatedChecklist = task.checklist.map(i => 
                                      i.id === item.id ? { ...i, completed: !i.completed } : i
                                    );
                                    updateTask(task.id, { checklist: updatedChecklist });
                                  }}
                                  className="w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"
                                />
                                <span className={`ml-2 text-sm ${item.completed ? 'line-through text-gray-500' : ''}`}>
                                  {item.text}
                                </span>
                              </div>
                            ))}
                          </div>
                        )}
                      </div>
                    )}

                    <div className="border-t pt-4">
                      <div className="flex justify-between items-center mb-3">
                        <h4 className="font-medium text-gray-900">Comments</h4>
                        <button
                          onClick={() => setEditMode(true)}
                          className="p-2 text-blue-600 hover:bg-blue-50 rounded"
                        >
                          <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
                          </svg>
                        </button>
                      </div>
                      
                      <div className="space-y-3 mb-4">
                        {task.comments.length === 0 ? (
                          <p className="text-gray-500 text-sm">No comments yet</p>
                        ) : (
                          task.comments.map(comment => (
                            <div key={comment.id} className="bg-gray-50 p-3 rounded-lg">
                              <div className="flex justify-between items-start mb-1">
                                <span className="font-medium text-sm">{comment.user}</span>
                                <span className="text-xs text-gray-500">
                                  {new Date(comment.timestamp).toLocaleDateString()} at 
                                  {new Date(comment.timestamp).toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}
                                </span>
                              </div>
                              <p className="text-sm text-gray-700">{comment.text}</p>
                            </div>
                          ))
                        )}
                      </div>

                      <div className="flex space-x-2">
                        <input
                          type="text"
                          value={newComment}
                          onChange={(e) => setNewComment(e.target.value)}
                          placeholder="Add a comment..."
                          className="flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                          onKeyPress={(e) => e.key === 'Enter' && addComment()}
                        />
                        <button
                          onClick={addComment}
                          className="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"
                        >
                          Post
                        </button>
                      </div>
                    </div>

                    <div className="flex justify-between pt-4 border-t">
                      <button
                        onClick={() => deleteTask(task.id)}
                        className="flex items-center px-4 py-2 text-red-600 hover:bg-red-50 rounded-md"
                      >
                        <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                        </svg>
                        Delete Task
                      </button>
                      <div className="flex space-x-2">
                        <button
                          onClick={() => setEditMode(true)}
                          className="flex items-center px-4 py-2 text-blue-600 hover:bg-blue-50 rounded-md"
                        >
                          <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
                          </svg>
                          Edit
                        </button>
                        <button
                          onClick={() => toggleComplete(task.id)}
                          className={`flex items-center px-4 py-2 rounded-md ${
                            task.completed 
                              ? 'bg-gray-600 text-white hover:bg-gray-700' 
                              : 'bg-green-600 text-white hover:bg-green-700'
                          }`}
                        >
                          {task.completed ? (
                            <>
                              <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z" />
                              </svg>
                              Mark Incomplete
                            </>
                          ) : (
                            <>
                              <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7" />
                              </svg>
                              Mark Complete
                            </>
                          )}
                        </button>
                      </div>
                    </div>
                  </div>
                )}
              </div>
            </div>
          </div>
        );
      };

      return (
        <div className={`${darkMode ? 'dark' : ''}`}>
          <div className={`min-h-screen ${darkMode ? 'bg-gray-900 text-white' : 'bg-gray-50 text-gray-900'} transition-colors duration-200`}>
            {/* Header */}
            <header className={`${darkMode ? 'bg-gray-800' : 'bg-white'} shadow-sm sticky top-0 z-40`}>
              <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div className="flex justify-between items-center h-16">
                  <div className="flex items-center">
                    <button
                      onClick={() => setSidebarOpen(!sidebarOpen)}
                      className="p-2 rounded-md text-gray-500 hover:text-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700 mr-2"
                    >
                      <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 6h16M4 12h16M4 18h16" />
                      </svg>
                    </button>
                    <h1 className="text-xl font-bold text-blue-600 flex items-center">
                      <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" />
                      </svg>
                      TaskFlow Pro
                    </h1>
                  </div>

                  <div className="flex items-center space-x-4">
                    <div className="relative">
                      <svg xmlns="http://www.w3.org/2000/svg" className="absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                      </svg>
                      <input
                        type="text"
                        placeholder="Search tasks..."
                        value={searchTerm}
                        onChange={(e) => setSearchTerm(e.target.value)}
                        className={`pl-10 pr-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 w-64 ${
                          darkMode ? 'bg-gray-700 border-gray-600 text-white' : 'bg-white border-gray-300'
                        }`}
                      />
                    </div>

                    <button
                      onClick={() => setDarkMode(!darkMode)}
                      className={`p-2 rounded-md ${
                        darkMode ? 'bg-gray-700 text-yellow-400' : 'bg-gray-100 text-gray-600'
                      }`}
                    >
                      {darkMode ? (
                        <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
                        </svg>
                      ) : (
                        <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
                        </svg>
                      )}
                    </button>

                    <div className="flex items-center space-x-2">
                      <img
                        src="https://placehold.co/32x32/3b82f6/FFFFFF?text=U"
                        alt="User"
                        className="w-8 h-8 rounded-full"
                      />
                      <span className="text-sm font-medium">User</span>
                    </div>
                  </div>
                </div>
              </div>
            </header>

            <div className="flex">
              {/* Sidebar */}
              {sidebarOpen && (
                <aside className={`w-64 ${darkMode ? 'bg-gray-800' : 'bg-white'} shadow-sm min-h-screen p-4 fixed h-full z-30`}>
                  <nav className="space-y-2">
                    <h3 className="text-sm font-semibold text-gray-500 uppercase tracking-wider px-2">
                      Navigation
                    </h3>
                    <button
                      onClick={() => setActiveTab('tasks')}
                      className={`w-full text-left px-3 py-2 rounded-md flex items-center space-x-2 ${
                        activeTab === 'tasks'
                          ? 'bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-200' 
                          : 'text-gray-600 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700'
                      }`}
                    >
                      <svg xmlns="http://www.w3.org/2000/svg" className="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" />
                      </svg>
                      <span>Tasks</span>
                    </button>
                    
                    <button
                      onClick={() => setActiveTab('analytics')}
                      className={`w-full text-left px-3 py-2 rounded-md flex items-center space-x-2 ${
                        activeTab === 'analytics'
                          ? 'bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-200' 
                          : 'text-gray-600 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700'
                      }`}
                    >
                      <svg xmlns="http://www.w3.org/2000/svg" className="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
                      </svg>
                      <span>Analytics</span>
                    </button>

                    <div className="border-t pt-4 mt-4">
                      <h3 className="text-sm font-semibold text-gray-500 uppercase tracking-wider px-2">
                        Projects
                      </h3>
                      <button
                        onClick={() => setSelectedProject(null)}
                        className={`w-full text-left px-3 py-2 rounded-md flex items-center space-x-2 ${
                          !selectedProject 
                            ? 'bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-200' 
                            : 'text-gray-600 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700'
                        }`}
                      >
                        <svg xmlns="http://www.w3.org/2000/svg" className="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10" />
                        </svg>
                        <span>All Tasks</span>
                      </button>
                      
                      {projects.map(project => (
                        <button
                          key={project.id}
                          onClick={() => setSelectedProject(project)}
                          className={`w-full text-left px-3 py-2 rounded-md flex items-center space-x-2 ${
                            selectedProject?.id === project.id
                              ? 'bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-200' 
                              : 'text-gray-600 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700'
                          }`}
                        >
                          <div className={`w-3 h-3 rounded-full ${project.color}`}></div>
                          <span>{project.name}</span>
                        </button>
                      ))}
                    </div>

                    <div className="border-t pt-4 mt-4">
                      <h3 className="text-sm font-semibold text-gray-500 uppercase tracking-wider px-2">
                        Filters
                      </h3>
                      
                      <div className="space-y-2 px-2">
                        <div>
                          <label className="block text-xs font-medium text-gray-500 mb-1">Status</label>
                          <select
                            value={filterStatus}
                            onChange={(e) => setFilterStatus(e.target.value)}
                            className={`w-full px-2 py-1 text-sm border rounded ${
                              darkMode ? 'bg-gray-700 border-gray-600' : 'bg-white border-gray-300'
                            }`}
                          >
                            <option value="all">All Status</option>
                            <option value="todo">To Do</option>
                            <option value="in-progress">In Progress</option>
                            <option value="done">Done</option>
                          </select>
                        </div>

                        <div>
                          <label className="block text-xs font-medium text-gray-500 mb-1">Priority</label>
                          <select
                            value={filterPriority}
                            onChange={(e) => setFilterPriority(e.target.value)}
                            className={`w-full px-2 py-1 text-sm border rounded ${
                              darkMode ? 'bg-gray-700 border-gray-600' : 'bg-white border-gray-300'
                            }`}
                          >
                            <option value="all">All Priority</option>
                            <option value="low">Low</option>
                            <option value="medium">Medium</option>
                            <option value="high">High</option>
                          </select>
                        </div>
                      </div>
                    </div>

                    <div className="border-t pt-4 mt-4">
                      <h3 className="text-sm font-semibold text-gray-500 uppercase tracking-wider px-2">
                        View
                      </h3>
                      <div className="space-y-1 px-2">
                        <button
                          onClick={() => setViewMode('board')}
                          className={`w-full flex items-center space-x-2 px-3 py-2 rounded-md text-sm ${
                            viewMode === 'board'
                              ? 'bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-200' 
                              : 'text-gray-600 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700'
                          }`}
                        >
                          <svg xmlns="http://www.w3.org/2000/svg" className="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z" />
                          </svg>
                          <span>Board</span>
                        </button>
                        <button
                          onClick={() => setViewMode('list')}
                          className={`w-full flex items-center space-x-2 px-3 py-2 rounded-md text-sm ${
                            viewMode === 'list'
                              ? 'bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-200' 
                              : 'text-gray-600 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700'
                          }`}
                        >
                          <svg xmlns="http://www.w3.org/2000/svg" className="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 6h16M4 10h16M4 14h16M4 18h16" />
                          </svg>
                          <span>List</span>
                        </button>
                      </div>
                    </div>
                  </nav>
                </aside>
              )}

              {/* Main Content */}
              <main className={`flex-1 ${sidebarOpen ? 'md:ml-64' : ''} transition-all duration-300`}>
                {activeTab === 'tasks' ? (
                  <div className="p-6">
                    <div className="max-w-7xl mx-auto">
                      {/* Header */}
                      <div className="flex items-center justify-between mb-6">
                        <div>
                          <h2 className="text-2xl font-bold">
                            {selectedProject ? selectedProject.name : 'All Tasks'}
                          </h2>
                          <p className="text-gray-600 dark:text-gray-400">
                            {filteredTasks.length} task{filteredTasks.length !== 1 ? 's' : ''} found
                          </p>
                        </div>
                        
                        <button
                          onClick={() => setShowAddTask(true)}
                          className="flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors"
                        >
                          <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
                          </svg>
                          <span>Add Task</span>
                        </button>
                      </div>

                      {/* Task View */}
                      {viewMode === 'board' ? <TaskBoard /> : <TaskList />}
                    </div>
                  </div>
                ) : (
                  <div className="p-6">
                    <div className="max-w-7xl mx-auto">
                      <div className="flex items-center justify-between mb-6">
                        <h2 className="text-2xl font-bold">Analytics Dashboard</h2>
                        <button
                          onClick={() => setActiveTab('tasks')}
                          className="flex items-center space-x-2 bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700 transition-colors"
                        >
                          <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M10 19l-7-7m0 0l7-7m-7 7h18" />
                          </svg>
                          Back to Tasks
                        </button>
                      </div>
                      <AnalyticsDashboard />
                    </div>
                  </div>
                )}
              </main>
            </div>

            {/* Modals */}
            {showTaskDetail && (
              <TaskDetailModal 
                task={tasks.find(t => t.id === showTaskDetail)} 
                onClose={() => setShowTaskDetail(null)} 
              />
            )}
            
            <AddTaskModal />
          </div>
        </div>
      );
    };

    // Render the app
    const container = document.getElementById('root');
    ReactDOM.render(<App />, container);
  </script>
</body>
</html>